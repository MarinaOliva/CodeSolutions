extends ../layouts/main

block contenido
  .row.justify-content-center
    .col-lg-8

      .card.shadow-sm
        .card-header
          h1 Crear Nueva Tarea
        
        .card-body
          //- Formulario para crear tarea
          form(action="/tareas/crear" method="POST")
            
            //- Nombre de la tarea
            .mb-3
              label.form-label(for="nombre") Nombre de la tarea
              input.form-control(type="text" name="nombre" id="nombre" required)

            //- Fila para Proyecto y Estado
            .row
              .col-md-6.mb-3
                label.form-label(for="proyectoId") Proyecto
                select.form-select(name="proyectoId" id="proyectoId" required)
                  if proyectos && proyectos.length > 0
                    each proyecto in proyectos
                      option(value=proyecto._id)= proyecto.nombre
                  else
                    option(disabled selected) No hay proyectos disponibles

              .col-md-6.mb-3
                label.form-label(for="estado") Estado
                select.form-select(name="estado" id="estado" required)
                  option(value="Pendiente" selected) Pendiente
                  option(value="En progreso") En progreso

            //- Fila para Horas
            .row
              .col-md-6.mb-3
                label.form-label(for="horasEstimadas") Horas Estimadas
                input.form-control(type="number" name="horasEstimadas" id="horasEstimadas" min="0" placeholder="0")
              
              .col-md-6.mb-3
                label.form-label(for="horasRegistradas") Horas Registradas
                input.form-control(type="number" name="horasRegistradas" id="horasRegistradas" min="0" value="0")

            //- Empleados asignados
            .mb-3
              label.form-label Empleados asignados
              .border.rounded.p-3(style="max-height: 200px; overflow-y: auto;")
                if empleados && empleados.length > 0
                  each empleado in empleados
                    .form-check
                      input.form-check-input(
                        type="checkbox",
                        name="empleadosAsignados",
                        value=empleado._id,
                        id=`emp-${empleado._id}`
                      )
                      label.form-check-label(for=`emp-${empleado._id}`)= `${empleado.nombre} (${empleado.rol})`
                else
                  p.text-muted.mb-0 No hay empleados disponibles
            
            hr

            //- Botones
            .text-end
              a.btn.btn-secondary.me-2(href="/tareas") Cancelar
              button.btn.btn-success(type="submit") Crear Tarea