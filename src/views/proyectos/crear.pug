extends ../layouts/main

block contenido
  .row.justify-content-center
    .col-lg-8

      .card.shadow-sm
        .card-header
          h1 Nuevo Proyecto
        
        .card-body
          if error
            .alert.alert-danger Hubo un error al crear el proyecto.

          form(action="/proyectos/crear" method="POST")
            
            .mb-3
              label.form-label(for="nombre") Nombre del proyecto
              input.form-control(type="text" name="nombre" id="nombre" required value=datos && datos.nombre ? datos.nombre : '')

            .mb-3
              label.form-label(for="cliente") Cliente
              input.form-control(type="text" name="cliente" id="cliente" required value=datos && datos.cliente ? datos.cliente : '')

            .row
              .col-md-6.mb-3
                label.form-label(for="estado") Estado
                select.form-select(name="estado" id="estado" required)
                  each estado in estadosValidos
                    option(value=estado selected=(datos && datos.estado === estado))= estado
              
              .col-md-6.mb-3
                //- (Espacio)

            .mb-3
              label.form-label(for="descripcion") DescripciÃ³n
              textarea.form-control(name="descripcion" id="descripcion" rows="3")= datos && datos.descripcion ? datos.descripcion : ''

            .mb-3
              label.form-label Empleados asignados
              .border.rounded.p-3(style="max-height: 200px; overflow-y: auto;")
                if empleados && empleados.length > 0
                  each empleado in empleados
                    .form-check
                      input.form-check-input(
                        type="checkbox", 
                        name="empleadosAsignados", 
                        value=empleado._id, 
                        id=`emp-${empleado._id}`,
                        checked=(datos && datos.empleadosAsignados && datos.empleadosAsignados.includes(empleado._id.toString()))
                      )
                      label.form-check-label(for=`emp-${empleado._id}`)= `${empleado.nombre} (${empleado.rol})`
                else
                  p.text-muted.mb-0 No hay empleados disponibles

            hr

            .text-end
              a.btn.btn-secondary.me-2(href="/proyectos") Cancelar
              button.btn.btn-success(type="submit") Crear Proyecto
