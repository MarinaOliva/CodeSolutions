extends ../layouts/main

block contenido
  .container.mt-5
    .row.justify-content-center
      .col-md-8
        .card.shadow
          .card-body
            h3.text-center.mb-4 Mi Perfil

            if error
              .alert.alert-danger.text-center= error

            if exito
              .alert.alert-success.text-center= exito

            if !usuario
              .alert.alert-danger.text-center
                | No hay información de usuario. Inicie sesión nuevamente.
            else
              //- Datos del usuario
              ul.list-group.mb-4
                li.list-group-item
                  strong Email:
                  |  #{usuario.email}

                li.list-group-item
                  strong Cargo:
                  |  #{usuario.rol}

                if usuario.nombre
                  li.list-group-item
                    strong Nombre:
                    |  #{usuario.nombre}

              //- CAMBIAR CONTRASEÑA
              h4.mt-4 Cambiar contraseña

              form(method="POST", action="/auth/profile/change-password?_method=PUT")
                .mb-3
                  label.form-label(for="actual") Contraseña actual
                  input.form-control(type="password", name="actual", required)

                .mb-3
                  label.form-label(for="password") Nueva contraseña
                  input.form-control#password(type="password", name="password", required)

                  //- Requisitos 
                  ul.list-unstyled.mt-2#password-requisitos
                    li.text-muted#req-length Debe tener al menos 8 caracteres
                    li.text-muted#req-mayus Debe incluir una letra mayúscula
                    li.text-muted#req-minus Debe incluir una letra minúscula
                    li.text-muted#req-num Debe incluir un número
                    li.text-muted#req-special Debe incluir un carácter especial (!@#$%^&*)

                .mb-3
                  label.form-label(for="confirmPassword") Confirmar nueva contraseña
                  input.form-control#confirm_password(type="password" name="confirmPassword" required)
                  small.text-danger#match-error(style="display:none") Las contraseñas no coinciden.

                p.text-danger.mt-1#passwordError

                button.btn.btn-primary.mt-2(type="submit") Actualizar contraseña

              .mt-4.text-center
                a.btn.btn-secondary(href="/") Volver al inicio
                a.btn.btn-danger.ms-2(href="/auth/logout") Cerrar sesión

//- block scripts 
block scripts
  script(src="/js/passwordValidation.js")
